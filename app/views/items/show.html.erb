<div class="breadcrumb">
  <%= link_to t('navigation.back_to_dashboard'), root_path, class: "back-link" %> |
  <%= link_to t('items.all_items'), items_path, class: "back-link" %>
</div>

<div class="item-header">
  <div class="header-content">
    <h1><%= @item.name %></h1>
    <%= link_to t('navigation.edit', resource: t('items.title').singularize), edit_item_path(@item.barcode), class: "btn btn-secondary" %>
  </div>
  <div class="item-details">
    <p class="barcode"><%= t('items.barcode') %>: <%= @item.barcode %></p>
    <% if @item.category %>
      <p class="category"><%= t('items.category') %>: <%= link_to @item.category.name, category_path(@item.category), class: "category-link" %></p>
    <% else %>
      <p class="category"><%= t('items.category') %>: <span class="no-category"><%= t('items.uncategorized') %></span></p>
    <% end %>
    <% if @item.description.present? %>
      <p class="description"><%= @item.description %></p>
    <% end %>
    <p class="total-quantity"><%= t('items.total_quantity') %>: <%= @item.total_quantity %></p>

    <% if @oldest_inventory_item && aging_enabled? %>
      <% days_stored = (Date.current - @oldest_inventory_item.added_at.to_date).to_i %>
      <p class="oldest-storage-info">
        <%= t('items.oldest_storage') %>:
        <span class="storage-duration-badge <%= aging_css_class(days_stored) %>">
          <%= t('time.ago', time: "#{days_stored} #{days_stored == 1 ? t('time.days.one') : t('time.days.other')}") %><%= format_storage_info(days_stored) %>
        </span>
        in <%= link_to @oldest_inventory_item.location.name, location_path(@oldest_inventory_item.location.barcode), class: "location-link" %>
      </p>
    <% end %>
  </div>
</div>

<div class="item-locations">
  <h2><%= t('items.stored_in') %></h2>

  <% if @inventory_items.any? %>
    <div class="locations-list">
      <% @inventory_items.each do |inventory_item| %>
        <div class="location-entry">
          <div class="location-info">
            <h3><%= link_to inventory_item.location.name, location_path(inventory_item.location.barcode), class: "location-link" %></h3>
            <p class="barcode"><%= t('items.barcode') %>: <%= inventory_item.location.barcode %></p>
            <% if inventory_item.location.description.present? %>
              <p class="description"><%= inventory_item.location.description %></p>
            <% end %>
          </div>
          <div class="quantity-info">
            <span class="quantity"><%= inventory_item.quantity %></span>
            <span class="unit"><%= t('time.units') %></span>
          </div>
          <div class="timestamp">
            <% if aging_enabled? %>
              <% days_stored = (Date.current - inventory_item.added_at.to_date).to_i %>
              <span class="storage-duration-badge <%= aging_css_class(days_stored) %>">
                <%= days_stored %> <%= days_stored == 1 ? t('time.days.one') : t('time.days.other') %>
              </span>
              <br>
            <% end %>
            <small><%= t('items.added_ago', time: time_ago_in_words(inventory_item.added_at)) %></small>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <h3><%= t('dashboard.not_stored') %></h3>
      <p><%= t('items.not_stored_message', location: location_term.downcase) %></p>
    </div>
  <% end %>
</div>
