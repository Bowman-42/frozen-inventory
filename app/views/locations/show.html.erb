<div class="breadcrumb">
  <%= link_to "â† Back to Dashboard", root_path, class: "back-link" %>
</div>

<div class="location-header">
  <h1><%= @location.name %></h1>
  <p class="barcode">Barcode: <%= @location.barcode %></p>
  <% if @location.description.present? %>
    <p class="description"><%= @location.description %></p>
  <% end %>
  <p class="total-items">Total: <%= pluralize(@location.total_items, 'item') %></p>

  <% if @oldest_inventory_item %>
    <% days_stored = (Date.current - @oldest_inventory_item.added_at.to_date).to_i %>
    <p class="oldest-item-info">
      Oldest item:
      <span class="storage-duration-badge <%= 'warning' if days_stored > 120 %> <%= 'danger' if days_stored > 180 %>">
        <%= pluralize(days_stored, 'day') %> ago
      </span>
      (<%= link_to @oldest_inventory_item.item.name, item_path(@oldest_inventory_item.item.barcode), class: "item-link" %>)
    </p>
  <% end %>
</div>

<div class="location-contents">
  <h2>Contents</h2>

  <% if @inventory_items.any? %>
    <div class="items-grid">
      <% @inventory_items.each do |inventory_item| %>
        <div class="item-card">
          <div class="item-info">
            <h3><%= link_to inventory_item.item.name, item_path(inventory_item.item.barcode), class: "item-link" %></h3>
            <p class="barcode">Barcode: <%= inventory_item.item.barcode %></p>
            <% if inventory_item.item.description.present? %>
              <p class="description"><%= inventory_item.item.description %></p>
            <% end %>
          </div>
          <div class="quantity-info">
            <span class="quantity"><%= inventory_item.quantity %></span>
            <span class="unit">units</span>
          </div>
          <div class="timestamp">
            <% days_stored = (Date.current - inventory_item.added_at.to_date).to_i %>
            <span class="storage-duration-badge <%= 'warning' if days_stored > 120 %> <%= 'danger' if days_stored > 180 %>">
              <%= pluralize(days_stored, 'day') %>
            </span>
            <br>
            <small>Added <%= time_ago_in_words(inventory_item.added_at) %> ago</small>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="empty-state">
      <h3>This fridge is empty</h3>
      <p>No items have been added to this location yet.</p>
    </div>
  <% end %>
</div>
